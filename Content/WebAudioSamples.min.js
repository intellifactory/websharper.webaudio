function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){self.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR;a=self;b=a.Site=a.Site||{};c=b.Client=b.Client||{};d=b.Samples=b.Samples||{};e=d.Set=d.Set||{};f=a.EventTarget;g=a.WindowOrWorkerGlobalScope;h=a.WebSharper=a.WebSharper||{};i=h.JavaScript=h.JavaScript||{};j=i.JS=i.JS||{};k=d.Sample=d.Sample||{};l=h.Operators=h.Operators||{};m=h.Obj=h.Obj||{};n=h.UI=h.UI||{};o=n.HtmlModule=n.HtmlModule||{};p=o.attr=o.attr||{};q=h.List=h.List||{};r=n.Doc=n.Doc||{};s=a.StartupCode$WebAudioSamples$Client=a.StartupCode$WebAudioSamples$Client||{};t=q.T=q.T||{};u=a.Node;v=h.Unchecked=h.Unchecked||{};w=n.AttrProxy=n.AttrProxy||{};x=i.Pervasives=i.Pervasives||{};y=n.AttrModule=n.AttrModule||{};z=n.Array=n.Array||{};A=n.Client=n.Client||{};B=A.Templates=A.Templates||{};C=b.AudioVisualizer=b.AudioVisualizer||{};D=b.ChannelSplitter=b.ChannelSplitter||{};E=b.TimeDomain=b.TimeDomain||{};F=n.Attrs=n.Attrs||{};G=n.DomUtility=n.DomUtility||{};H=n.View=n.View||{};I=h.Arrays=h.Arrays||{};J=a.Object;K=h.Collections=h.Collections||{};L=K.Dictionary=K.Dictionary||{};M=h.Seq=h.Seq||{};N=a.StartupCode$WebAudioSamples$AudioVisualizer=a.StartupCode$WebAudioSamples$AudioVisualizer||{};O=a.StartupCode$WebAudioSamples$ChannelSplitter=a.StartupCode$WebAudioSamples$ChannelSplitter||{};P=a.StartupCode$WebAudioSamples$TimeDomain=a.StartupCode$WebAudioSamples$TimeDomain||{};Q=n.Snap=n.Snap||{};R=n.DocElemNode=n.DocElemNode||{};S=a.CharacterData;T=h.Enumerator=h.Enumerator||{};U=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};V=K.HashSet=K.HashSet||{};W=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};X=n.Var=n.Var||{};Y=a.AudioNode;Z=n.Var$1=n.Var$1||{};_0=d.Builder=d.Builder||{};_1=T.T=T.T||{};_2=n.Elt=n.Elt||{};_3=A.Attrs=A.Attrs||{};_4=_3.Dyn=_3.Dyn||{};_5=K.DictionaryUtil=K.DictionaryUtil||{};_6=B.Prepare=B.Prepare||{};_7=h.Slice=h.Slice||{};_8=K.KeyCollection=K.KeyCollection||{};_9=n.ConcreteVar=n.ConcreteVar||{};_=b.AudioHolder=b.AudioHolder||{};$=n.Docs=n.Docs||{};ba=n.Updates=n.Updates||{};bb=h.Strings=h.Strings||{};bc=n.An=n.An||{};bd=A.Settings=A.Settings||{};be=n.Abbrev=n.Abbrev||{};bf=be.Mailbox=be.Mailbox||{};bg=be.Fresh=be.Fresh||{};bh=a.ArrayBufferView;bi=a.Element;bj=a.HTMLElement;bk=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};bl=A.Docs=A.Docs||{};bm=bl.RunState=bl.RunState||{};bn=bl.NodeSet=bl.NodeSet||{};bo=n.Anims=n.Anims||{};bp=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};bq=a.StartupCode$WebAudioSamples$AudioHolder=a.StartupCode$WebAudioSamples$AudioHolder||{};br=K.HashSetUtil=K.HashSetUtil||{};bs=h.Queue=h.Queue||{};bt=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};bu=h.Concurrency=h.Concurrency||{};bv=n.AppendList=n.AppendList||{};bw=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};bx=n.Easing=n.Easing||{};by=bu.AsyncBody=bu.AsyncBody||{};bz=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};bA=bu.CT=bu.CT||{};bB=be.HashSet=be.HashSet||{};bC=n.DynamicAttrNode=n.DynamicAttrNode||{};bD=bu.Scheduler=bu.Scheduler||{};bE=h.CancellationTokenSource=h.CancellationTokenSource||{};bF=bl.DomNodes=bl.DomNodes||{};bG=a.Error;bH=h.OperationCanceledException=h.OperationCanceledException||{};bI=h.Lazy=h.Lazy||{};bJ=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};bK=h.LazyExtensionsProxy=h.LazyExtensionsProxy||{};bL=bK.LazyRecord=bK.LazyRecord||{};bM=a.IntelliFactory;bN=bM&&bM.Runtime;bO=a.Math;bP=a.console;bQ=a.jQuery;bR=a.Date;c.Main=function(){return c.All().Show();};c.All=function(){s.$cctor();return s.All;};e=d.Set=bN.Class({Show:function(){var bS;bS=this;return a.jQuery(function(){var bT;function bU(bV,bW){a.jQuery("#sample-navs ul").children("li").removeClass("active");a.jQuery(bW).addClass("active");return bV.Show();}self.document;bT=r.Element("ul",[w.Create("class","nav nav-pills")],[r.Concat(q.mapi(function(bV,bW){return r.Element("li",[y.OnAfterRender(function(bX){if(bV===0)bU(bW,bX);}),y.Handler("click",function(bX){return function(){return bU(bW,bX);};})],[r.Element("a",[w.Create("href","#")],[r.TextNode(bW.Title)])]);},bS.$0))]);B.LoadLocalTemplates("");return r.RunAppendById("sample-navs",bT);});}},null,e);e.Singleton=function(bS){return new e({$:0,$0:q.ofArray([bS])});};e.Create=function(bS){return new e({$:0,$0:q.ofSeq(M.delay(function(){return M.collect(function(bT){return bT.$0;},bS);}))});};j.GetFieldValues=function(bS){var bT,bU;bT=[];for(var bV in bS)bT.push(bS[bV]);return bT;};k=d.Sample=bN.Class({Show:function(){var bS,bT,bU,bV;bS=this;bT=self.document.getElementById("sample-main");bU=self.document.getElementById("sample-side");d.Clear(bT);d.Clear(bU);this.Render(bT);bV=r.Concat([r.Element("div",[y.OnAfterRender(function(bW){var bX,bY;bX=self.document.getElementById(bS.Id);v.Equals(bX,null)?void 0:(bY=bX.cloneNode(true),bY.attributes.removeNamedItem("id"),bW.appendChild(bY));})],[]),r.Element("a",[w.Create("class","btn btn-primary btn-lg"),w.Create("href","http://github.com/intellifactory/websharper.babylonjs/blob/master/Site/"+this.FileName)],[r.TextNode("Source")])]);B.LoadLocalTemplates("");r.RunAppendById("sample-side",bV);}},null,k);k.New=function(bS,bT,bU,bV,bW){return new k({FileName:bS,Id:bT,Keywords:bU,Render:bV,Title:bW});};l.FailWith=function(bS){throw new bG(bS);};l.KeyValue=function(bS){return[bS.K,bS.V];};l.toInt=function(bS){var bT;bT=l.toUInt(bS);return bT>=2147483648?bT-4294967296:bT;};l.toUInt=function(bS){return(bS<0?bO.ceil(bS):bO.floor(bS))>>>0;};m=h.Obj=bN.Class({Equals:function(bS){return this===bS;},GetHashCode:function(){return -1;}},null,m);m.New=bN.Ctor(function(){},m);p=o.attr=bN.Class({},m,p);q.mapi=function(bS,bT){var bU,bV,bW,bX,bY,bZ;if(bT.$==0)return bT;else{bY=new t({$:1});bU=bY;bV=bT;bW=0;bX=true;while(bX){bU.$0=bS(bW,bV.$0);bV=bV.$1;bV.$==0?bX=false:(bU=(bZ=new t({$:1}),bU.$1=bZ,bZ),bW=bW+1);}bU.$1=t.Empty;return bY;}};q.ofArray=function(bS){var bT,bU,bV;bT=t.Empty;for(bU=I.length(bS)-1,bV=0;bU>=bV;bU--)bT=new t({$:1,$0:I.get(bS,bU),$1:bT});return bT;};q.ofSeq=function(bS){var bT,bU,bV,bW,bX,bY;if(bS instanceof t)return bS;else if(bS instanceof a.Array)return q.ofArray(bS);else{bT=T.Get(bS);try{bV=bT.MoveNext();if(!bV)bU=t.Empty;else{bX=new t({$:1});bW=bX;while(bV){bW.$0=bT.Current();bT.MoveNext()?bW=(bY=new t({$:1}),bW.$1=bY,bY):bV=false;}bW.$1=t.Empty;bU=bX;}return bU;}finally{if(typeof bT=="object"&&"Dispose"in bT)bT.Dispose();}}};q.map=function(bS,bT){var bU,bV,bW,bX,bY;if(bT.$==0)return bT;else{bX=new t({$:1});bU=bX;bV=bT;bW=true;while(bW){bU.$0=bS(bV.$0);bV=bV.$1;bV.$==0?bW=false:bU=(bY=new t({$:1}),bU.$1=bY,bY);}bU.$1=t.Empty;return bX;}};q.head=function(bS){return bS.$==1?bS.$0:q.listEmpty();};q.tail=function(bS){return bS.$==1?bS.$1:q.listEmpty();};q.listEmpty=function(){return l.FailWith("The input list was empty.");};q.iteri=function(bS,bT){var bU,bV;bU=bT;bV=0;while(bU.$==1){bS(bV,q.head(bU));bU=q.tail(bU);bV=bV+1;}};q.append=function(bS,bT){var bU,bV,bW,bX,bY;if(bS.$==0)return bT;else if(bT.$==0)return bS;else{bX=new t({$:1});bU=bX;bV=bS;bW=true;while(bW){bU.$0=bV.$0;bV=bV.$1;bV.$==0?bW=false:bU=(bY=new t({$:1}),bU.$1=bY,bY);}bU.$1=bT;return bX;}};r=n.Doc=bN.Class({},m,r);r.Concat=function(bS){var bT;bT=z.ofSeqNonCopying(bS);return z.TreeReduce(r.get_Empty(),r.Append,bT);};r.TextNode=function(bS){return r.Mk({$:5,$0:G.CreateText(bS)},H.Const());};r.Append=function(bS,bT){return r.Mk({$:0,$0:bS.docNode,$1:bT.docNode},H.Map2Unit(bS.updates,bT.updates));};r.get_Empty=function(){return r.Mk(null,H.Const());};r.RunAppendById=function(bS,bT){var bU;bU=G.Doc().getElementById(bS);v.Equals(bU,null)?l.FailWith("invalid id: "+bS):r.RunAppend(bU,bT);};r.Element=function(bS,bT,bU){var bV,bW;bV=w.Concat(bT);bW=r.Concat(bU);return _2.New(G.CreateElement(bS),bV,bW);};r.Mk=function(bS,bT){return new r.New(bS,bT);};r.RunAppend=function(bS,bT){var bU;bU=self.document.createTextNode("");bS.appendChild(bU);r.RunBefore(bU,bT);};r.RunBefore=function(bS,bT){var bU;bU=self.document.createTextNode("");bS.parentNode.insertBefore(bU,bS);r.RunBetween(bU,bS,bT);};r.RunBetween=function(bS,bT,bU){var bV;$.LinkPrevElement(bT,bU.docNode);bV=$.CreateDelimitedRunState(bS,bT,bU.docNode);H.Sink(bc.get_UseAnimations()||bd.BatchUpdatesEnabled()?bf.StartProcessor($.PerformAnimatedUpdate(false,bV,bU.docNode)):function(){$.PerformSyncUpdate(false,bV,bU.docNode);},bU.updates);};r.Radio=function(bS,bT,bU){var bV,bW;bV=G.CreateElement("input");bV.addEventListener("click",function(){return bU.Set(bT);},false);bW=y.DynamicProp("checked",H.Map(function(bX){return v.Equals(bX,bT);},bU.get_View()));return _2.New(bV,w.Concat(q.append(q.ofArray([w.Create("type","radio"),w.Create("name",bU.get_Id()),bW]),q.ofSeq(bS))),r.get_Empty());};r.Run=function(bS,bT){$.LinkElement(bS,bT.docNode);r.RunInPlace(false,bS,bT);};r.RunInPlace=function(bS,bT,bU){var bV;bV=$.CreateRunState(bT,bU.docNode);H.Sink(bc.get_UseAnimations()||bd.BatchUpdatesEnabled()?bf.StartProcessor($.PerformAnimatedUpdate(bS,bV,bU.docNode)):function(){$.PerformSyncUpdate(bS,bV,bU.docNode);},bU.updates);};r.New=bN.Ctor(function(bS,bT){m.New.call(this);this.docNode=bS;this.updates=bT;},r);s.$cctor=function(){s.$cctor=a.ignore;s.All=e.Create([e.Singleton(C.Sample()),e.Singleton(D.Sample()),e.Singleton(E.Sample())]);};t=q.T=bN.Class({GetEnumerator:function(){return new _1.New(this,null,function(bS){var bT;bT=bS.s;return bT.$==0?false:(bS.c=bT.$0,bS.s=bT.$1,true);},void 0);},GetEnumerator0:function(){return T.Get(this);}},null,t);t.Empty=new t({$:0});d.Clear=function(bS){while(bS.hasChildNodes())bS.removeChild(bS.firstChild);};d.Build=function(){return _0.New(null,null,t.Empty,null,null);};d.req=function(bS,bT){return bT!=null&&bT.$==1?bT.$0:l.FailWith("Required property not set: "+bS);};d.op_PlusPlus=function(bS,bT){return bS==null?bT:bS;};v.Equals=function(bS,bT){var bU,bV,bW,bX;if(bS===bT)return true;else{bU=typeof bS;if(bU=="object"){if(bS===null||bS===void 0||bT===null||bT===void 0)return false;else if("Equals"in bS)return bS.Equals(bT);else if(bS instanceof a.Array&&bT instanceof a.Array)return v.arrayEquals(bS,bT);else if(bS instanceof a.Date&&bT instanceof a.Date)return v.dateEquals(bS,bT);else{bV=[true];for(var bY in bS)if(function(bZ){bV[0]=!bS.hasOwnProperty(bZ)||bT.hasOwnProperty(bZ)&&v.Equals(bS[bZ],bT[bZ]);return!bV[0];}(bY))break;if(bV[0]){for(var bZ in bT)if(function(b0){bV[0]=!bT.hasOwnProperty(b0)||bS.hasOwnProperty(b0);return!bV[0];}(bZ))break;}return bV[0];}}else return bU=="function"&&("$Func"in bS?bS.$Func===bT.$Func&&bS.$Target===bT.$Target:"$Invokes"in bS&&"$Invokes"in bT&&v.arrayEquals(bS.$Invokes,bT.$Invokes));}};v.arrayEquals=function(bS,bT){var bU,bV;if(I.length(bS)===I.length(bT)){bU=true;bV=0;while(bU&&bV<I.length(bS)){!v.Equals(I.get(bS,bV),I.get(bT,bV))?bU=false:void 0;bV=bV+1;}return bU;}else return false;};v.dateEquals=function(bS,bT){return bS.getTime()===bT.getTime();};v.Hash=function(bS){var bT;bT=typeof bS;return bT=="function"?0:bT=="boolean"?bS?1:0:bT=="number"?bS:bT=="string"?v.hashString(bS):bT=="object"?bS==null?0:bS instanceof a.Array?v.hashArray(bS):v.hashObject(bS):0;};v.hashString=function(bS){var bT,bU,bV;if(bS===null)return 0;else{bT=5381;for(bU=0,bV=bS.length-1;bU<=bV;bU++)bT=v.hashMix(bT,bS[bU].charCodeAt());return bT;}};v.hashArray=function(bS){var bT,bU,bV;bT=-34948909;for(bU=0,bV=I.length(bS)-1;bU<=bV;bU++)bT=v.hashMix(bT,v.Hash(I.get(bS,bU)));return bT;};v.hashObject=function(bS){var bT,bU;if("GetHashCode"in bS)return bS.GetHashCode();else{bT=[0];for(var bV in bS)if(function(bW){bT[0]=v.hashMix(v.hashMix(bT[0],v.hashString(bW)),v.Hash(bS[bW]));return false;}(bV))break;return bT[0];}};v.hashMix=function(bS,bT){return(bS<<5)+bS+bT;};v.Compare=function(bS,bT){var bU,bV,bW,bX,bY,bZ;if(bS===bT)return 0;else{bV=typeof bS;switch(bV=="function"?1:bV=="boolean"?2:bV=="number"?2:bV=="string"?2:bV=="object"?3:0){case 0:return typeof bT=="undefined"?0:-1;case 1:return l.FailWith("Cannot compare function values.");case 2:return bS<bT?-1:1;case 3:if(bS===null)bW=-1;else if(bT===null)bW=1;else if("CompareTo"in bS)bW=bS.CompareTo(bT);else if("CompareTo0"in bS)bW=bS.CompareTo0(bT);else if(bS instanceof a.Array&&bT instanceof a.Array)bW=v.compareArrays(bS,bT);else if(bS instanceof a.Date&&bT instanceof a.Date)bW=v.compareDates(bS,bT);else{bX=[0];for(var b0 in bS)if(function(b1){return!bS.hasOwnProperty(b1)?false:!bT.hasOwnProperty(b1)?(bX[0]=1,true):(bX[0]=v.Compare(bS[b1],bT[b1]),bX[0]!==0);}(b0))break;if(bX[0]===0){for(var b1 in bT)if(function(b2){return!bT.hasOwnProperty(b2)?false:!bS.hasOwnProperty(b2)&&(bX[0]=-1,true);}(b1))break;}bW=bX[0];}return bW;}}};v.compareArrays=function(bS,bT){var bU,bV;if(I.length(bS)<I.length(bT))return -1;else if(I.length(bS)>I.length(bT))return 1;else{bU=0;bV=0;while(bU===0&&bV<I.length(bS)){bU=v.Compare(I.get(bS,bV),I.get(bT,bV));bV=bV+1;}return bU;}};v.compareDates=function(bS,bT){return v.Compare(bS.getTime(),bT.getTime());};w=n.AttrProxy=bN.Class({},null,w);w.Create=function(bS,bT){return F.Static(function(bU){G.SetAttr(bU,bS,bT);});};w.Concat=function(bS){var bT;bT=z.ofSeqNonCopying(bS);return z.TreeReduce(F.EmptyAttr(),w.Append,bT);};w.Append=function(bS,bT){return F.AppendTree(bS,bT);};x.NewFromSeq=function(bS){var bT,bU,bV;bT={};bU=T.Get(bS);try{while(bU.MoveNext()){bV=bU.Current();bT[bV[0]]=bV[1];}}finally{if(typeof bU=="object"&&"Dispose"in bU)bU.Dispose();}return bT;};y.OnAfterRender=function(bS){return new w({$:4,$0:bS});};y.Handler=function(bS,bT){return F.Static(function(bU){bU.addEventListener(bS,function(bV){return(bT(bU))(bV);},false);});};y.Style=function(bS,bT){return F.Static(function(bU){G.SetStyle(bU,bS,bT);});};y.DynamicProp=function(bS,bT){return F.Dynamic(bT,function(bU){return function(bV){bU[bS]=bV;};});};z.ofSeqNonCopying=function(bS){var bT,bU;if(bS instanceof a.Array)return bS;else if(bS instanceof t)return I.ofList(bS);else if(bS===null)return[];else{bT=[];bU=T.Get(bS);try{while(bU.MoveNext())bT.push(bU.Current());return bT;}finally{if(typeof bU=="object"&&"Dispose"in bU)bU.Dispose();}}};z.TreeReduce=function(bS,bT,bU){var bV;function bW(bX,bY){var bZ,b0;return bY<=0?bS:bY===1&&(bX>=0&&bX<bV)?I.get(bU,bX):(b0=bY/2>>0,bT(bW(bX,b0),bW(bX+b0,bY-b0)));}bV=I.length(bU);return bW(0,bV);};z.MapTreeReduce=function(bS,bT,bU,bV){var bW;function bX(bY,bZ){var b0,b1;return bZ<=0?bT:bZ===1&&(bY>=0&&bY<bW)?bS(I.get(bV,bY)):(b1=bZ/2>>0,bU(bX(bY,b1),bX(bY+b1,bZ-b1)));}bW=I.length(bV);return bX(0,bW);};B.LoadLocalTemplates=function(bS){!B.LocalTemplatesLoaded()?(B.set_LocalTemplatesLoaded(true),B.LoadNestedTemplates(self.document.body,"")):void 0;B.LoadedTemplates().set_Item(bS,B.LoadedTemplateFile(""));};B.LocalTemplatesLoaded=function(){U.$cctor();return U.LocalTemplatesLoaded;};B.set_LocalTemplatesLoaded=function(bS){U.$cctor();U.LocalTemplatesLoaded=bS;};B.LoadNestedTemplates=function(bS,bT){var bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8;function bU(b9){var b_,b$;if(!bV.ContainsKey(b9)){b_=(b$=null,[bW.TryGetValue(b9,{get:function(){return b$;},set:function(ca){b$=ca;}}),b$]);b_[0]?(b8.Add(b9),bW.Remove(b9),B.PrepareTemplateStrict(bT,{$:1,$0:b9},b_[1][0],{$:1,$0:b_[1][1]},{$:1,$0:bU})):bP.warn(b8.Contains(b9)?"Encountered loop when instantiating "+b9:"Local template does not exist: "+b9);}}bV=B.LoadedTemplateFile(bT);bW=new L.New$5();bX=bS.querySelectorAll("[ws-template]");for(bY=0,bZ=bX.length-1;bY<=bZ;bY++){b0=bX[bY];b1=b0.getAttribute("ws-template").toLowerCase();b0.removeAttribute("ws-template");bW.set_Item(b1,[[b0],B.FakeRootSingle(b0)]);}b2=bS.querySelectorAll("[ws-children-template]");for(b3=0,b4=b2.length-1;b3<=b4;b3++){b5=b2[b3];b6=b5.getAttribute("ws-children-template").toLowerCase();b5.removeAttribute("ws-children-template");bW.set_Item(b6,(b7=G.ChildrenArray(b5),[b7,B.FakeRoot(b7)]));}b8=new V.New$3();while(bW.count>0)bU(M.head(bW.get_Keys()));};B.LoadedTemplates=function(){U.$cctor();return U.LoadedTemplates;};B.LoadedTemplateFile=function(bS){var bT,bU,bV;bT=(bU=null,[B.LoadedTemplates().TryGetValue(bS,{get:function(){return bU;},set:function(bW){bU=bW;}}),bU]);return bT[0]?bT[1]:(bV=new L.New$5(),(B.LoadedTemplates().set_Item(bS,bV),bV));};B.FakeRootSingle=function(bS){var bT,bU,bV;bS.removeAttribute("ws-template");bT=bS.getAttribute("ws-replace");bT===null?void 0:(bS.removeAttribute("ws-replace"),bU=bS.parentNode,v.Equals(bU,null)?void 0:(bV=self.document.createElement(bS.tagName),bV.setAttribute("ws-replace",bT),bU.replaceChild(bV,bS)));return B.FakeRoot([bS]);};B.FakeRoot=function(bS){var bT,bU,bV;bT=self.document.createElement("div");for(bU=0,bV=bS.length-1;bU<=bV;bU++)bT.appendChild(I.get(bS,bU));return bT;};B.PrepareTemplateStrict=function(bS,bT,bU,bV,bW){var bX,bY;function bZ(b4,b5){var b6,b7,b8,b9,b_,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu;function b$(cv){}while(true)switch(b4){case 0:if(b5!==null){b6=b5.nextSibling;if(v.Equals(b5.nodeType,u.TEXT_NODE))_6.convertTextNode(b5);else if(v.Equals(b5.nodeType,u.ELEMENT_NODE))b1(b5);b5=b6;}else return null;break;case 1:ca=_7.string(b5.nodeName,{$:1,$0:3},null).toLowerCase();cb=(b7=ca.indexOf("."),b7===-1?[bS,ca]:[_7.string(ca,null,{$:1,$0:b7-1}),_7.string(ca,{$:1,$0:b7+1},null)]);cc=cb[1];cd=cb[0];if(cd!==""&&!B.LoadedTemplates().ContainsKey(cd))return _6.failNotLoaded(cc);else{if(cd===""&&bW!=null)bW.$0(cc);ce=B.LoadedTemplates().get_Item(cd);if(!ce.ContainsKey(cc))return _6.failNotLoaded(cc);else{cf=ce.get_Item(cc);cg=cf.cloneNode(true);ch=new V.New$3();ci=new L.New$5();cj=b5.attributes;for(ck=0,cl=cj.length-1;ck<=cl;ck++){cm=cj.item(ck).name.toLowerCase();ci.set_Item(cm,(cn=cj.item(ck).nodeValue,cn===""?cm:cn.toLowerCase()));!ch.Add(cm)?bP.warn("Hole mapped twice",cm):void 0;}for(co=0,cp=b5.childNodes.length-1;co<=cp;co++){cq=b5.childNodes[co];v.Equals(cq.nodeType,u.ELEMENT_NODE)?!ch.Add(cq.nodeName.toLowerCase())?bP.warn("Hole filled twice",cc):void 0:void 0;}cr=b5.childNodes.length===1&&v.Equals(b5.firstChild.nodeType,u.TEXT_NODE);if(cr){b9=_6.fillTextHole(cg,b5.firstChild.textContent,cc);((function(cv){return function(cw){if(cw!=null)cv(cw.$0);};}((b_=function(cv){return function(cw){return cv.Add(cw);};}(ch),function(cv){return b$(b_(cv));})))(b9));}_6.removeHolesExcept(cg,ch);if(!cr){for(cs=0,ct=b5.childNodes.length-1;cs<=ct;cs++){cu=b5.childNodes[cs];v.Equals(cu.nodeType,u.ELEMENT_NODE)?cu.hasAttributes()?_6.fillInstanceAttrs(cg,cu):b0(cg,cu):void 0;}}_6.mapHoles(cg,ci);_6.fill(cg,b5.parentNode,b5);b5.parentNode.removeChild(b5);return;}}break;}}function b0(b4,b5){var b6,b8,b9;function b7(b_,b$){var ca,cb,cc;if(b8==="title"&&b5.hasChildNodes()){ca=bQ.parseHTML(b5.textContent);b5.removeChild(b5.firstChild);for(cb=0,cc=ca.length-1;cb<=cc;cb++)b5.appendChild(I.get(ca,cb));}else null;b1(b5);return _6.fill(b5,b_,b$);}b8=b5.nodeName.toLowerCase();G.IterSelector(b4,"[ws-attr-holes]",function(b_){var b$,ca,cb,cc,cd;b$=bb.SplitChars(b_.getAttribute("ws-attr-holes"),[" "],1);for(ca=0,cb=b$.length-1;ca<=cb;ca++){cc=I.get(b$,ca);b_.setAttribute(cc,(cd=new a.RegExp("\\${"+b8+"}","ig"),b_.getAttribute(cc).replace(cd,b5.textContent)));}});b9=b4.querySelector("[ws-hole="+b8+"]");if(v.Equals(b9,null)){b6=b4.querySelector("[ws-replace="+b8+"]");return v.Equals(b6,null)?null:(b7(b6.parentNode,b6),void b6.parentNode.removeChild(b6));}else{while(b9.hasChildNodes())b9.removeChild(b9.lastChild);b9.removeAttribute("ws-hole");return b7(b9,null);}}function b1(b4){if(bb.StartsWith(b4.nodeName.toLowerCase(),"ws-"))b3(b4);else{_6.convertAttrs(b4);b2(b4.firstChild);}}function b2(b4){return bZ(0,b4);}function b3(b4){return bZ(1,b4);}bX=bV==null?B.FakeRoot(bU):bV.$0;bY=(bT==null?"":bT.$0).toLowerCase();B.LoadedTemplateFile(bS).set_Item(bY,bX);I.length(bU)>0?(function(b4){var b5,b6,b7,b8;while(true){b5=b4.querySelector("[ws-template]");if(v.Equals(b5,null)){b6=b4.querySelector("[ws-children-template]");if(v.Equals(b6,null))return null;else{b7=b6.getAttribute("ws-children-template");b6.removeAttribute("ws-children-template");B.PrepareTemplateStrict(bS,{$:1,$0:b7},G.ChildrenArray(b6),null,null);b4=b4;}}else{b8=b5.getAttribute("ws-template");(B.PrepareSingleTemplate(bS,{$:1,$0:b8},b5))(null);b4=b4;}}}(bX),b2(I.get(bU,0))):void 0;};B.PrepareSingleTemplate=function(bS,bT,bU){var bV,bW,bX;bV=B.FakeRootSingle(bU);bW=[bU];bX={$:1,$0:bV};return function(bY){B.PrepareTemplateStrict(bS,bT,bW,bX,bY);};};B.TextHoleRE=function(){U.$cctor();return U.TextHoleRE;};C.Sample=function(){N.$cctor();return N.Sample;};C.context=function(){N.$cctor();return N.context;};C.filter=function(){N.$cctor();return N.filter;};C.Filters=function(){N.$cctor();return N.Filters;};C.GenRadioButton=function(bS){return r.Element("div",[],[r.Element("label",[],[r.Radio([w.Create("name","filters")],bS,C.rFilter()),r.TextNode(a.String(bS))])]);};C.Main=function(bS){var bT;C.Stop();_.StopCurrent();bT=r.Concat([C.Canvas(),r.Element("div",[y.Style("display","inline-block")],C.RadioGroup())]);B.LoadLocalTemplates("");r.Run(bS,bT);C.LoadSound("diesirae.mp3",function(bU){C.context().decodeAudioData(bU,function(bV){(C.buffer())[0]=bV;C.Analyser();return C.rFilter().Set("allpass");});});};C.rFilter=function(){N.$cctor();return N.rFilter;};C.Stop=function(){var bS;bS=C.sourceNode();bS==null?void 0:bS.$0.stop();};C.Canvas=function(){N.$cctor();return N.Canvas;};C.RadioGroup=function(){N.$cctor();return N.RadioGroup;};C.LoadSound=function(bS,bT){var bU;bU=new a.XMLHttpRequest();bU.open("GET",bS,true);bU.responseType="arraybuffer";bU.onload=function(){bT(bU.response);};bU.send();};C.buffer=function(){N.$cctor();return N.buffer;};C.Analyser=function(){var bS,bT,bU,bV;bS=C.context().createAnalyser();bS.smoothingTimeConstant=0.3;bS.fftSize=1024;bT=C.context().createScriptProcessor(2048,1,1);self.sourceNode=bT;bT.connect(C.context().destination);bT.onaudioprocess=function(){var bW,bX,bY;bW=new a.Uint8Array(l.toInt(bS.frequencyBinCount));bS.getByteFrequencyData(bW);bX=C.Canvas().elt.getContext("2d");bX.clearRect(0,0,1000,325);bY=bX.createLinearGradient(0,0,0,300);C.MkGradient(bY);bX.fillStyle=bY;return C.DrawSpectrum(bX,bW);};C.filter().type="allpass";C.filter().connect(bS);C.set_sourceNode({$:1,$0:C.context().createBufferSource()});bS.connect(bT);C.filter().connect(C.context().destination);bU=C.sourceNode();bU==null?void 0:(bV=bU.$0,_.SetCurrent(bV),bV.connect(C.filter()),bV.buffer=(C.buffer())[0],bV.loop=true,bV.start());};C.sourceNode=function(){N.$cctor();return N.sourceNode;};C.MkGradient=function(bS){bS.addColorStop(1,"#000000");bS.addColorStop(0.75,"#ff0000");bS.addColorStop(0.25,"#ffff00");bS.addColorStop(0,"#ffffff");};C.DrawSpectrum=function(bS,bT){q.iteri(function(bU,bV){return bS.fillRect(bU*5,325-bV,3,325);},C.ToList(bT));};C.set_sourceNode=function(bS){N.$cctor();N.sourceNode=bS;};C.ToList=function(bS){var bT,bU,bV;bT=bS.length-1;bU=t.Empty;while(true)if(bT<=-1)return bU;else{bV=bT;bT=bV-1;bU=new t({$:1,$0:bS[bV],$1:bU});}};D.Sample=function(){O.$cctor();return O.Sample;};D.volume=function(){O.$cctor();return O.volume;};D.Main=function(bS){var bT;D.Stop();_.StopCurrent();bT=r.Concat([D.Canvas(),D.VolumeControl()]);B.LoadLocalTemplates("");r.Run(bS,bT);D.LoadSound("diesirae.mp3",function(bU){D.context().decodeAudioData(bU,function(bV){(D.buffer())[0]=bV;return D.Analyser();});});};D.Stop=function(){var bS;bS=D.sourceNode();bS==null?void 0:bS.$0.stop();};D.Canvas=function(){O.$cctor();return O.Canvas;};D.VolumeControl=function(){O.$cctor();return O.VolumeControl;};D.LoadSound=function(bS,bT){var bU;bU=new a.XMLHttpRequest();bU.open("GET",bS,true);bU.responseType="arraybuffer";bU.onload=function(){bT(bU.response);};bU.send();};D.buffer=function(){O.$cctor();return O.buffer;};D.Analyser=function(){var bS,bT,bU,bV,bW,bX,bY;bS=D.context().createAnalyser();bS.smoothingTimeConstant=0.3;bS.fftSize=1024;bT=D.context().createAnalyser();bT.smoothingTimeConstant=0;bT.fftSize=1024;bU=D.context().createGain();bV=D.context().createScriptProcessor(2048,1,1);self.sourceNode=bV;bV.connect(D.context().destination);bV.onaudioprocess=function(){var bZ,b0,b1,b2,b3,b4;bZ=new a.Uint8Array(l.toInt(bS.frequencyBinCount));bS.getByteFrequencyData(bZ);b0=M.average(q.map(a.id,D.ToList(bZ)));b1=new a.Uint8Array(l.toInt(bT.frequencyBinCount));bT.getByteFrequencyData(b1);b2=M.average(q.map(a.id,D.ToList(b1)));b3=D.Canvas().elt.getContext("2d");b3.clearRect(0,0,60,130);b4=b3.createLinearGradient(0,0,0,130);D.MkGradient(b4);b3.fillStyle=b4;b3.fillRect(0,130-b0,25,130);b3.fillRect(30,130-b2,25,130);bU.gain.value=(D.volume())[0];};bW=D.context().createChannelSplitter();D.set_sourceNode({$:1,$0:D.context().createBufferSource()});bU.connect(bW);bW.connect(bS,0,0);bW.connect(bT,1,0);bS.connect(bV);bU.connect(D.context().destination);bX=D.sourceNode();bX==null?void 0:(bY=bX.$0,_.SetCurrent(bY),bY.connect(bU),bY.loop=true,bY.buffer=(D.buffer())[0],bY.start());};D.context=function(){O.$cctor();return O.context;};D.sourceNode=function(){O.$cctor();return O.sourceNode;};D.MkGradient=function(bS){bS.addColorStop(1,"#000000");bS.addColorStop(0.75,"#ff0000");bS.addColorStop(0.25,"#ffff00");bS.addColorStop(0,"#ffffff");};D.ToList=function(bS){var bT,bU,bV;bT=bS.length-1;bU=t.Empty;while(true)if(bT<=-1)return bU;else{bV=bT;bT=bV-1;bU=new t({$:1,$0:bS[bV],$1:bU});}};D.set_sourceNode=function(bS){O.$cctor();O.sourceNode=bS;};E.Sample=function(){P.$cctor();return P.Sample;};E.context=function(){P.$cctor();return P.context;};E.filter=function(){P.$cctor();return P.filter;};E.Filters=function(){P.$cctor();return P.Filters;};E.GenRadioButton=function(bS){return r.Element("div",[],[r.Element("label",[],[r.Radio([w.Create("name","filters")],bS,E.rFilter()),r.TextNode(a.String(bS))])]);};E.Main=function(bS){var bT;E.Stop();_.StopCurrent();bT=r.Concat([E.CanvasEl(),r.Element("div",[y.Style("display","inline-block")],E.RadioGroup())]);B.LoadLocalTemplates("");r.Run(bS,bT);E.LoadSound("diesirae.mp3",function(bU){E.context().decodeAudioData(bU,function(bV){(E.buffer())[0]=bV;E.Analyser();return E.rFilter().Set("allpass");});});};E.rFilter=function(){P.$cctor();return P.rFilter;};E.Stop=function(){var bS;bS=E.sourceNode();bS==null?void 0:bS.$0.stop();};E.CanvasEl=function(){P.$cctor();return P.CanvasEl;};E.RadioGroup=function(){P.$cctor();return P.RadioGroup;};E.LoadSound=function(bS,bT){var bU;bU=new a.XMLHttpRequest();bU.open("GET",bS,true);bU.responseType="arraybuffer";bU.onload=function(){bT(bU.response);};bU.send();};E.buffer=function(){P.$cctor();return P.buffer;};E.Analyser=function(){var bS,bT,bU,bV;bS=E.context().createAnalyser();bS.smoothingTimeConstant=0.3;bS.fftSize=1024;bT=E.context().createScriptProcessor(2048,1,1);self.sourceNode=bT;bT.connect(E.context().destination);bT.onaudioprocess=function(){var bW;bW=new a.Uint8Array(l.toInt(bS.frequencyBinCount));bS.getByteTimeDomainData(bW);return E.DrawTimeDomain(E.CanvasEl().elt.getContext("2d"),bW);};E.filter().type="allpass";E.filter().connect(bS);E.set_sourceNode({$:1,$0:E.context().createBufferSource()});bS.connect(bT);E.filter().connect(E.context().destination);bU=E.sourceNode();bU==null?void 0:(bV=bU.$0,_.SetCurrent(bV),bV.connect(E.filter()),bV.buffer=(E.buffer())[0],bV.loop=true,bV.start());};E.sourceNode=function(){P.$cctor();return P.sourceNode;};E.DrawTimeDomain=function(bS,bT){var bU,bV,bW;bU=bQ(E.CanvasEl().elt);bV=bU.width();bW=bU.height();bS.clearRect(0,0,bV,bW);q.iteri(function(bX,bY){bS.fillStyle="#ffffff";return bS.fillRect(bX,bW-bW*(bY/256)-1,1,1);},E.ToList(bT));};E.set_sourceNode=function(bS){P.$cctor();P.sourceNode=bS;};E.ToList=function(bS){var bT,bU,bV;bT=bS.length-1;bU=t.Empty;while(true)if(bT<=-1)return bU;else{bV=bT;bT=bV-1;bU=new t({$:1,$0:bS[bV],$1:bU});}};F.Static=function(bS){return new w({$:3,$0:bS});};F.Updates=function(bS){return z.MapTreeReduce(function(bT){return bT.NChanged();},H.Const(),H.Map2Unit,bS.DynNodes);};F.AppendTree=function(bS,bT){var bU;return bS===null?bT:bT===null?bS:(bU=new w({$:2,$0:bS,$1:bT}),(F.SetFlags(bU,F.Flags(bS)|F.Flags(bT)),bU));};F.EmptyAttr=function(){bk.$cctor();return bk.EmptyAttr;};F.Insert=function(bS,bT){var bU,bV,bW;function bX(bY){if(!(bY===null))if(bY!=null&&bY.$==1)bU.push(bY.$0);else if(bY!=null&&bY.$==2){bX(bY.$0);bX(bY.$1);}else if(bY!=null&&bY.$==3)bY.$0(bS);else if(bY!=null&&bY.$==4)bV.push(bY.$0);}bU=[];bV=[];bX(bT);bW=bU.slice(0);return _4.New(bS,F.Flags(bT),bW,bV.length===0?null:{$:1,$0:function(bY){M.iter(function(bZ){bZ(bY);},bV);}});};F.SetFlags=function(bS,bT){bS.flags=bT;};F.Flags=function(bS){return bS!==null&&bS.hasOwnProperty("flags")?bS.flags:0;};F.HasExitAnim=function(bS){var bT;bT=2;return(bS.DynFlags&bT)===bT;};F.GetExitAnim=function(bS){return F.GetAnim(bS,function(bT,bU){return bT.NGetExitAnim(bU);});};F.HasEnterAnim=function(bS){var bT;bT=1;return(bS.DynFlags&bT)===bT;};F.GetEnterAnim=function(bS){return F.GetAnim(bS,function(bT,bU){return bT.NGetEnterAnim(bU);});};F.HasChangeAnim=function(bS){var bT;bT=4;return(bS.DynFlags&bT)===bT;};F.GetChangeAnim=function(bS){return F.GetAnim(bS,function(bT,bU){return bT.NGetChangeAnim(bU);});};F.Dynamic=function(bS,bT){return new w({$:1,$0:new bC.New(bS,bT)});};F.GetAnim=function(bS,bT){return bc.Concat(I.map(function(bU){return bT(bU,bS.DynElem);},bS.DynNodes));};F.Sync=function(bS,bT){I.iter(function(bU){bU.NSync(bS);},bT.DynNodes);};G.SetAttr=function(bS,bT,bU){bS.setAttribute(bT,bU);};G.CreateText=function(bS){return G.Doc().createTextNode(bS);};G.Doc=function(){W.$cctor();return W.Doc;};G.CreateElement=function(bS){return G.Doc().createElement(bS);};G.ChildrenArray=function(bS){var bT,bU,bV;bT=[];for(bU=0,bV=bS.childNodes.length-1;bU<=bV;bU++)bT.push(bS.childNodes[bU]);return bT;};G.IterSelector=function(bS,bT,bU){var bV,bW,bX;bV=bS.querySelectorAll(bT);for(bW=0,bX=bV.length-1;bW<=bX;bW++)bU(bV[bW]);};G.SetStyle=function(bS,bT,bU){G.SetProperty(bS.style,bT,bU);};G.SetProperty=function(bS,bT,bU){return bS.setProperty(bT,bU);};G.InsertAt=function(bS,bT,bU){var bV;if(!(bU.parentNode===bS&&bT===(bV=bU.nextSibling,v.Equals(bV,null)?null:bV)))bS.insertBefore(bU,bT);};G.RemoveNode=function(bS,bT){if(bT.parentNode===bS)bS.removeChild(bT);};H.Const=function(bS){var bT;bT=Q.New({$:0,$0:bS});return function(){return bT;};};H.Map2Unit=function(bS,bT){return H.CreateLazy(function(){return Q.Map2Unit(bS(),bT());});};H.CreateLazy=function(bS){var bT;bT={c:null,o:bS};return function(){var bU,bV;bU=bT.c;return bU===null?(bU=bT.o(),bT.c=bU,(bV=bU.s,bV!=null&&bV.$==0)?bT.o=null:Q.WhenObsoleteRun(bU,function(){bT.c=null;}),bU):bU;};};H.Sink=function(bS,bT){function bU(){Q.WhenRun(bT(),bS,function(){bu.scheduler().Fork(bU);});}bu.scheduler().Fork(bU);};H.Map=function(bS,bT){return H.CreateLazy(function(){return Q.Map(bS,bT());});};H=n.View=bN.Class({},null,H);I.get=function(bS,bT){I.checkBounds(bS,bT);return bS[bT];};I.length=function(bS){return bS.dims===2?bS.length*bS.length:bS.length;};I.checkBounds=function(bS,bT){if(bT<0||bT>=bS.length)l.FailWith("Index was outside the bounds of the array.");};I.set=function(bS,bT,bU){I.checkBounds(bS,bT);bS[bT]=bU;};I.ofList=function(bS){var bT,bU;bU=[];bT=bS;while(!(bT.$==0)){bU.push(q.head(bT));bT=q.tail(bT);}return bU;};I.exists=function(bS,bT){var bU,bV,bW,bX;bU=false;bV=0;bX=I.length(bT);while(!bU&&bV<bX)if(bS(bT[bV]))bU=true;else bV=bV+1;return bU;};I.tryPick=function(bS,bT){var bU,bV,bW;bU=null;bV=0;while(bV<bT.length&&bU==null){bW=bS(bT[bV]);bW!=null&&bW.$==1?bU=bW:void 0;bV=bV+1;}return bU;};I.tryFindIndex=function(bS,bT){var bU,bV;bU=null;bV=0;while(bV<bT.length&&bU==null){bS(bT[bV])?bU={$:1,$0:bV}:void 0;bV=bV+1;}return bU;};I.filter=function(bS,bT){var bU,bV,bW;bU=[];for(bV=0,bW=bT.length-1;bV<=bW;bV++)if(bS(bT[bV]))bU.push(bT[bV]);return bU;};I.map=function(bS,bT){var bU,bV,bW;bU=new a.Array(bT.length);for(bV=0,bW=bT.length-1;bV<=bW;bV++)bU[bV]=bS(bT[bV]);return bU;};I.iter=function(bS,bT){var bU,bV;for(bU=0,bV=bT.length-1;bU<=bV;bU++)bS(bT[bU]);};I.concat=function(bS){return a.Array.prototype.concat.apply([],I.ofSeq(bS));};I.pick=function(bS,bT){var bU;bU=I.tryPick(bS,bT);return bU==null?l.FailWith("KeyNotFoundException"):bU.$0;};I.ofSeq=function(bS){var bT,bU;if(bS instanceof a.Array)return bS.slice();else if(bS instanceof t)return I.ofList(bS);else{bT=[];bU=T.Get(bS);try{while(bU.MoveNext())bT.push(bU.Current());return bT;}finally{if(typeof bU=="object"&&"Dispose"in bU)bU.Dispose();}}};I.foldBack=function(bS,bT,bU){var bV,bW,bX,bY,bZ;bV=bU;bX=bT.length;for(bY=1,bZ=bX;bY<=bZ;bY++)bV=bS(bT[bX-bY],bV);return bV;};I.choose=function(bS,bT){var bU,bV,bW,bX;bU=[];for(bV=0,bW=bT.length-1;bV<=bW;bV++){bX=bS(bT[bV]);bX==null?void 0:bU.push(bX.$0);}return bU;};I.create=function(bS,bT){var bU,bV,bW;bU=new a.Array(bS);for(bV=0,bW=bS-1;bV<=bW;bV++)bU[bV]=bT;return bU;};I.init=function(bS,bT){var bU,bV,bW;bS<0?l.FailWith("Negative size given."):null;bU=new a.Array(bS);for(bV=0,bW=bS-1;bV<=bW;bV++)bU[bV]=bT(bV);return bU;};I.forall=function(bS,bT){var bU,bV,bW,bX;bU=true;bV=0;bX=I.length(bT);while(bU&&bV<bX)if(bS(bT[bV]))bV=bV+1;else bU=false;return bU;};L=K.Dictionary=bN.Class({set_Item:function(bS,bT){this.set(bS,bT);},ContainsKey:function(bS){var bT,bU;bT=this;bU=this.data[this.hash(bS)];return bU==null?false:I.exists(function(bV){return bT.equals.apply(null,[(l.KeyValue(bV))[0],bS]);},bU);},TryGetValue:function(bS,bT){var bU,bV,bW;bU=this;bV=this.data[this.hash(bS)];return bV==null?false:(bW=I.tryPick(function(bX){var bY;bY=l.KeyValue(bX);return bU.equals.apply(null,[bY[0],bS])?{$:1,$0:bY[1]}:null;},bV),bW!=null&&bW.$==1&&(bT.set(bW.$0),true));},Remove:function(bS){return this.remove(bS);},get_Keys:function(){return new _8.New(this);},set:function(bS,bT){var bU,bV,bW,bX;bU=this;bV=this.hash(bS);bW=this.data[bV];bW==null?(this.count=this.count+1,this.data[bV]=new a.Array({K:bS,V:bT})):(bX=I.tryFindIndex(function(bY){return bU.equals.apply(null,[(l.KeyValue(bY))[0],bS]);},bW),bX==null?(this.count=this.count+1,bW.push({K:bS,V:bT})):bW[bX.$0]={K:bS,V:bT});},remove:function(bS){var bT,bU,bV,bW;bT=this;bU=this.hash(bS);bV=this.data[bU];return bV==null?false:(bW=I.filter(function(bX){return!bT.equals.apply(null,[(l.KeyValue(bX))[0],bS]);},bV),I.length(bW)<bV.length&&(this.count=this.count-1,this.data[bU]=bW,true));},get_Item:function(bS){return this.get(bS);},get:function(bS){var bT,bU;bT=this;bU=this.data[this.hash(bS)];return bU==null?_5.notPresent():I.pick(function(bV){var bW;bW=l.KeyValue(bV);return bT.equals.apply(null,[bW[0],bS])?{$:1,$0:bW[1]}:null;},bU);},GetEnumerator:function(){return T.Get0(this);},GetEnumerator0:function(){return T.Get0(I.concat(j.GetFieldValues(this.data)));}},m,L);L.New$5=bN.Ctor(function(){L.New$6.call(this,[],v.Equals,v.Hash);},L);L.New$6=bN.Ctor(function(bS,bT,bU){var bV,bW;m.New.call(this);this.equals=bT;this.hash=bU;this.count=0;this.data=[];bV=T.Get(bS);try{while(bV.MoveNext()){bW=bV.Current();this.set(bW.K,bW.V);}}finally{if(typeof bV=="object"&&"Dispose"in bV)bV.Dispose();}},L);M.delay=function(bS){return{GetEnumerator:function(){return T.Get(bS());}};};M.collect=function(bS,bT){return M.concat(M.map(bS,bT));};M.head=function(bS){var bT;bT=T.Get(bS);try{return bT.MoveNext()?bT.Current():M.insufficient();}finally{if(typeof bT=="object"&&"Dispose"in bT)bT.Dispose();}};M.concat=function(bS){return{GetEnumerator:function(){var bT;bT=T.Get(bS);return new _1.New(null,null,function(bU){var bV;while(true){bV=bU.s;if(v.Equals(bV,null)){if(bT.MoveNext()){bU.s=T.Get(bT.Current());bU=bU;}else{bT.Dispose();return false;}}else if(bV.MoveNext()){bU.c=bV.Current();return true;}else{bU.Dispose();bU.s=null;bU=bU;}}},function(bU){var bV;bV=bU.s;!v.Equals(bV,null)?bV.Dispose():void 0;!v.Equals(bT,null)?bT.Dispose():void 0;});}};};M.map=function(bS,bT){return{GetEnumerator:function(){var bU;bU=T.Get(bT);return new _1.New(null,null,function(bV){return bU.MoveNext()&&(bV.c=bS(bU.Current()),true);},function(){bU.Dispose();});}};};M.fold=function(bS,bT,bU){var bV,bW;bV=bT;bW=T.Get(bU);try{while(bW.MoveNext())bV=bS(bV,bW.Current());return bV;}finally{if(typeof bW=="object"&&"Dispose"in bW)bW.Dispose();}};M.average=function(bS){var bT,bU;bT=M.fold(function(bV,bW){return(function(bX){var bY,bZ;bY=bX[0];bZ=bX[1];return function(b0){return[bY+1,bZ+b0];};}(bV))(bW);},[0,0],bS);bU=bT[0];return bU===0?M.seqEmpty():bT[1]/bU;};M.iter=function(bS,bT){var bU;bU=T.Get(bT);try{while(bU.MoveNext())bS(bU.Current());}finally{if(typeof bU=="object"&&"Dispose"in bU)bU.Dispose();}};M.seqEmpty=function(){return l.FailWith("The input sequence was empty.");};M.max=function(bS){var bT,bU,bV;bT=T.Get(bS);try{if(!bT.MoveNext())M.seqEmpty();bU=bT.Current();while(bT.MoveNext()){bV=bT.Current();v.Compare(bV,bU)===1?bU=bV:void 0;}return bU;}finally{if(typeof bT=="object"&&"Dispose"in bT)bT.Dispose();}};N.$cctor=function(){N.$cctor=a.ignore;N.context=new(a.AudioContext||a.webkitAudioContext)();N.sourceNode=null;N.filter=C.context().createBiquadFilter();N.buffer=[null];N.Canvas=r.Element("canvas",[w.Create("width","1000"),w.Create("height","325")],[]);N.rFilter=Z.Lens(Z.Create$1("allpass"),a.id,function(bS,bT){C.filter().type=bT;return bT;});N.Filters=q.ofArray(["allpass","bandpass","highpass","highshelf","lowpass","lowshelf","notch","peaking"]);N.RadioGroup=q.map(C.GenRadioButton,C.Filters());N.Sample=d.Build().Id("AudioVisualizer").FileName("AudioVisualizer.fs").Keywords(q.ofArray(["webaudio","visualizer","frequency","spectrum"])).Render(function(bS){C.Main(bS);}).Create();};O.$cctor=function(){O.$cctor=a.ignore;O.context=new(a.AudioContext||a.webkitAudioContext)();O.sourceNode=null;O.buffer=[null];O.Canvas=r.Element("canvas",[w.Create("width","60"),w.Create("height","130"),w.Create("style","display: block;")],[]);O.volume=[1];O.VolumeControl=r.Element("input",[w.Create("type","range"),w.Create("min","1"),w.Create("max","100"),w.Create("value","100"),w.Create("style","width: 60px"),y.Handler("input",function(bS){return function(){var bT;bT=bQ(bS).val()/bQ(bS).prop("max");(D.volume())[0]=bT*bT;};})],[]);O.Sample=d.Build().Id("ChannelSplitter").FileName("ChannelSplitter.fs").Keywords(q.ofArray(["webaudio","vizualiser","channels","volume control"])).Render(function(bS){D.Main(bS);}).Create();};P.$cctor=function(){P.$cctor=a.ignore;P.context=new(a.AudioContext||a.webkitAudioContext)();P.sourceNode=null;P.filter=E.context().createBiquadFilter();P.buffer=[null];P.CanvasEl=r.Element("canvas",[w.Create("width","512"),w.Create("height","256"),w.Create("style","background-color: black")],[]);P.rFilter=Z.Lens(Z.Create$1("allpass"),a.id,function(bS,bT){E.filter().type=bT;return bT;});P.Filters=q.ofArray(["allpass","bandpass","highpass","highshelf","lowpass","lowshelf","notch","peaking"]);P.RadioGroup=q.map(E.GenRadioButton,E.Filters());P.Sample=d.Build().Id("TimeDomainVisualizer").FileName("TimeDomain.fs").Keywords(q.ofArray(["webaudio","timedomain","visualizer","audio"])).Render(function(bS){E.Main(bS);}).Create();};Q.Map2Unit=function(bS,bT){var bU,bV,bW;function bX(){var bY,bZ,b0;if(!(bY=bW.s,bY!=null&&bY.$==0||bY!=null&&bY.$==2)){bZ=Q.ValueAndForever(bS);b0=Q.ValueAndForever(bT);bZ!=null&&bZ.$==1?b0!=null&&b0.$==1?bZ.$0[1]&&b0.$0[1]?Q.MarkForever(bW,null):Q.MarkReady(bW,null):void 0:void 0;}}bU=bS.s;bV=bT.s;return bU!=null&&bU.$==0?bV!=null&&bV.$==0?Q.New({$:0,$0:null}):bT:bV!=null&&bV.$==0?bS:(bW=Q.New({$:3,$0:[],$1:[]}),(Q.When(bS,bX,bW),Q.When(bT,bX,bW),bW));};Q.WhenObsoleteRun=function(bS,bT){var bU;bU=bS.s;bU==null?bT():bU!=null&&bU.$==2?bU.$1.push(bT):bU!=null&&bU.$==3?bU.$1.push(bT):void 0;};Q.ValueAndForever=function(bS){var bT;bT=bS.s;return bT!=null&&bT.$==0?{$:1,$0:[bT.$0,true]}:bT!=null&&bT.$==2?{$:1,$0:[bT.$0,false]}:null;};Q.MarkForever=function(bS,bT){var bU,bV,bW,bX;bU=bS.s;if(bU!=null&&bU.$==3){bS.s={$:0,$0:bT};bV=bU.$0;for(bW=0,bX=I.length(bV)-1;bW<=bX;bW++)(I.get(bV,bW))(bT);}else void 0;};Q.MarkReady=function(bS,bT){var bU,bV,bW,bX;bU=bS.s;if(bU!=null&&bU.$==3){bS.s={$:2,$0:bT,$1:bU.$1};bV=bU.$0;for(bW=0,bX=I.length(bV)-1;bW<=bX;bW++)(I.get(bV,bW))(bT);}else void 0;};Q.When=function(bS,bT,bU){var bV;bV=bS.s;bV==null?Q.Obsolete(bU):bV!=null&&bV.$==2?(Q.EnqueueSafe(bV.$1,bU),bT(bV.$0)):bV!=null&&bV.$==3?(bV.$0.push(bT),Q.EnqueueSafe(bV.$1,bU)):bT(bV.$0);};Q.EnqueueSafe=function(bS,bT){var bU,bV,bW,bX;bS.push(bT);if(bS.length%20===0){bU=bS.slice(0);bs.Clear(bS);for(bV=0,bW=I.length(bU)-1;bV<=bW;bV++){bX=I.get(bU,bV);typeof bX=="object"?function(bY){if(bY.s)bS.push(bY);}(bX):function(bY){bS.push(bY);}(bX);}}else void 0;};Q.Copy=function(bS){var bT,bU,bV;bT=bS.s;return bT==null?bS:bT!=null&&bT.$==2?(bU=Q.New({$:2,$0:bT.$0,$1:[]}),(Q.WhenObsolete(bS,bU),bU)):bT!=null&&bT.$==3?(bV=Q.New({$:3,$0:[],$1:[]}),(Q.When(bS,function(bW){Q.MarkDone(bV,bS,bW);},bV),bV)):bS;};Q.WhenRun=function(bS,bT,bU){var bV;bV=bS.s;bV==null?bU():bV!=null&&bV.$==2?(bV.$1.push(bU),bT(bV.$0)):bV!=null&&bV.$==3?(bV.$0.push(bT),bV.$1.push(bU)):bT(bV.$0);};Q.Map=function(bS,bT){var bU,bV;bU=bT.s;return bU!=null&&bU.$==0?Q.New({$:0,$0:bS(bU.$0)}):(bV=Q.New({$:3,$0:[],$1:[]}),(Q.When(bT,function(bW){Q.MarkDone(bV,bT,bS(bW));},bV),bV));};Q.WhenObsolete=function(bS,bT){var bU;bU=bS.s;bU==null?Q.Obsolete(bT):bU!=null&&bU.$==2?Q.EnqueueSafe(bU.$1,bT):bU!=null&&bU.$==3?Q.EnqueueSafe(bU.$1,bT):void 0;};Q.MarkDone=function(bS,bT,bU){var bV;if(bV=bT.s,bV!=null&&bV.$==0)Q.MarkForever(bS,bU);else Q.MarkReady(bS,bU);};R=n.DocElemNode=bN.Class({Equals:function(bS){return this.ElKey===bS.ElKey;},GetHashCode:function(){return this.ElKey;}},null,R);R.New=function(bS,bT,bU,bV,bW,bX){var bY;return new R((bY={Attr:bS,Children:bT,El:bV,ElKey:bW},(bN.SetOptional(bY,"Delimiters",bU),bN.SetOptional(bY,"Render",bX),bY)));};T.Get=function(bS){return bS instanceof a.Array?T.ArrayEnumerator(bS):v.Equals(typeof bS,"string")?T.StringEnumerator(bS):bS.GetEnumerator();};T.ArrayEnumerator=function(bS){return new _1.New(0,null,function(bT){var bU;bU=bT.s;return bU<I.length(bS)&&(bT.c=I.get(bS,bU),bT.s=bU+1,true);},void 0);};T.StringEnumerator=function(bS){return new _1.New(0,null,function(bT){var bU;bU=bT.s;return bU<bS.length&&(bT.c=bS[bU],bT.s=bU+1,true);},void 0);};T.Get0=function(bS){return bS instanceof a.Array?T.ArrayEnumerator(bS):v.Equals(typeof bS,"string")?T.StringEnumerator(bS):"GetEnumerator0"in bS?bS.GetEnumerator0():bS.GetEnumerator();};U.$cctor=function(){U.$cctor=a.ignore;U.LoadedTemplates=new L.New$5();U.LocalTemplatesLoaded=false;U.TextHoleRE="\\${([^}]+)}";};V=K.HashSet=bN.Class({Add:function(bS){return this.add(bS);},Contains:function(bS){var bT;bT=this.data[this.hash(bS)];return bT==null?false:this.arrContains(bS,bT);},add:function(bS){var bT,bU;bT=this.hash(bS);bU=this.data[bT];return bU==null?(this.data[bT]=[bS],this.count=this.count+1,true):this.arrContains(bS,bU)?false:(bU.push(bS),this.count=this.count+1,true);},arrContains:function(bS,bT){var bU,bV,bW,bX;bU=true;bV=0;bX=bT.length;while(bU&&bV<bX)if(this.equals.apply(null,[bT[bV],bS]))bU=false;else bV=bV+1;return!bU;},ExceptWith:function(bS){var bT;bT=T.Get(bS);try{while(bT.MoveNext())this.Remove(bT.Current());}finally{if(typeof bT=="object"&&"Dispose"in bT)bT.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(bS){var bT,bU,bV,bW;bT=0;bU=br.concat(this.data);for(bV=0,bW=bU.length-1;bV<=bW;bV++)I.set(bS,bV,bU[bV]);},IntersectWith:function(bS){var bT,bU,bV,bW,bX;bT=new V.New$4(bS,this.equals,this.hash);bU=br.concat(this.data);for(bV=0,bW=bU.length-1;bV<=bW;bV++){bX=bU[bV];!bT.Contains(bX)?this.Remove(bX):void 0;}},Remove:function(bS){var bT;bT=this.data[this.hash(bS)];return bT==null?false:this.arrRemove(bS,bT)&&(this.count=this.count-1,true);},arrRemove:function(bS,bT){var bU,bV,bW,bX;bU=true;bV=0;bX=bT.length;while(bU&&bV<bX)if(this.equals.apply(null,[bT[bV],bS])){bT.splice.apply(bT,[bV,1]);bU=false;}else bV=bV+1;return!bU;},GetEnumerator:function(){return T.Get(br.concat(this.data));},GetEnumerator0:function(){return T.Get(br.concat(this.data));}},m,V);V.New$3=bN.Ctor(function(){V.New$4.call(this,[],v.Equals,v.Hash);},V);V.New$4=bN.Ctor(function(bS,bT,bU){var bV;m.New.call(this);this.equals=bT;this.hash=bU;this.data=[];this.count=0;bV=T.Get(bS);try{while(bV.MoveNext())this.add(bV.Current());}finally{if(typeof bV=="object"&&"Dispose"in bV)bV.Dispose();}},V);V.New$2=bN.Ctor(function(bS){V.New$4.call(this,bS,v.Equals,v.Hash);},V);W.$cctor=function(){W.$cctor=a.ignore;W.Doc=self.document;};X=n.Var=bN.Class({},m,X);X.New=bN.Ctor(function(){m.New.call(this);},X);Z=n.Var$1=bN.Class({},m,Z);Z.Create$1=function(bS){return new _9.New(false,Q.New({$:2,$0:bS,$1:[]}),bS);};Z.Lens=function(bS,bT,bU){var bV,bW,bX;bV=bg.Id();bW=H.Map(bT,bS.get_View());bX=new X({Get:function(){return bT(bS.Get());},Set:function(bY){return bS.Update(function(bZ){return bU(bZ,bY);});},SetFinal:function(bY){return this.Set(bY);},Update:function(bY){return bS.Update(function(bZ){return bU(bZ,bY(bT(bZ)));});},UpdateMaybe:function(bY){return bS.UpdateMaybe(function(bZ){var b0;b0=bY(bT(bZ));return b0==null?null:{$:1,$0:bU(bZ,b0.$0)};});},get_View:function(){return bW;},get_Id:function(){return bV;}});X.New.call(bX);return bX;};_0=d.Builder=bN.Class({Create:function(){var bS,bT,bU;bS=d.req("Id",d.op_PlusPlus(this.BId,this.BTitle));bT=(bU=d.op_PlusPlus(this.BTitle,this.BId),bU==null?"Sample":bU.$0);return k.New(d.req("FileName",this.BFileName),bS,this.BKeywords,d.req("Render",this.BRender),bT);},Render:function(bS){this.BRender={$:1,$0:bS};return this;},Keywords:function(bS){this.BKeywords=bS;return this;},FileName:function(bS){this.BFileName={$:1,$0:bS};return this;},Id:function(bS){this.BId={$:1,$0:bS};return this;}},null,_0);_0.New=function(bS,bT,bU,bV,bW){return new _0({BFileName:bS,BId:bT,BKeywords:bU,BRender:bV,BTitle:bW});};_1=T.T=bN.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},m,_1);_1.New=bN.Ctor(function(bS,bT,bU,bV){m.New.call(this);this.s=bS;this.c=bT;this.n=bU;this.d=bV;},_1);_2=n.Elt=bN.Class({},r,_2);_2.New=function(bS,bT,bU){var bV,bW;bV=$.CreateElemNode(bS,bT,bU.docNode);bW=ba.Create(bU.updates);return new _2.New$1({$:1,$0:bV},H.Map2Unit(F.Updates(bV.Attr),bW.v),bS,bW);};_2.New$1=bN.Ctor(function(bS,bT,bU,bV){r.New.call(this,bS,bT);this.docNode$1=bS;this.updates$1=bT;this.elt=bU;this.rvUpdates=bV;},_2);_4.New=function(bS,bT,bU,bV){var bW;bW={DynElem:bS,DynFlags:bT,DynNodes:bU};bN.SetOptional(bW,"OnAfterRender",bV);return bW;};Q.Obsolete=function(bS){var bT,bU,bV,bW,bX;bU=bS.s;if(bU==null||(bU!=null&&bU.$==2?(bT=bU.$1,false):bU!=null&&bU.$==3?(bT=bU.$1,false):true))void 0;else{bS.s=null;for(bV=0,bW=I.length(bT)-1;bV<=bW;bV++){bX=I.get(bT,bV);typeof bX=="object"?function(bY){Q.Obsolete(bY);}(bX):bX();}}};Q.New=function(bS){return{s:bS};};_5.notPresent=function(){return l.FailWith("The given key was not present in the dictionary.");};_6.convertTextNode=function(bS){var bT,bU,bV,bW,bX,bY;bT=null;bU=0;bW=bS.textContent;bX=new a.RegExp(B.TextHoleRE(),"g");while(bT=bX.exec(bW),bT!==null){bS.parentNode.insertBefore(self.document.createTextNode(_7.string(bW,{$:1,$0:bU},{$:1,$0:bX.lastIndex-I.get(bT,0).length-1})),bS);bU=bX.lastIndex;bY=self.document.createElement("span");bY.setAttribute("ws-replace",I.get(bT,1).toLowerCase());bS.parentNode.insertBefore(bY,bS);}bX.lastIndex=0;bS.textContent=_7.string(bW,{$:1,$0:bU},null);};_6.failNotLoaded=function(bS){bP.warn("Instantiating non-loaded template",bS);};_6.fillTextHole=function(bS,bT,bU){var bV;bV=bS.querySelector("[ws-replace]");return v.Equals(bV,null)?(bP.warn("Filling non-existent text hole",bU),null):(bV.parentNode.replaceChild(new a.Text(bT),bV),{$:1,$0:bV.getAttribute("ws-replace")});};_6.removeHolesExcept=function(bS,bT){function bU(bV){G.IterSelector(bS,"["+bV+"]",function(bW){if(!bT.Contains(bW.getAttribute(bV)))bW.removeAttribute(bV);});}bU("ws-attr");bU("ws-onafterrender");bU("ws-var");G.IterSelector(bS,"[ws-hole]",function(bV){if(!bT.Contains(bV.getAttribute("ws-hole"))){bV.removeAttribute("ws-hole");while(bV.hasChildNodes())bV.removeChild(bV.lastChild);}});G.IterSelector(bS,"[ws-replace]",function(bV){if(!bT.Contains(bV.getAttribute("ws-replace")))bV.parentNode.removeChild(bV);});G.IterSelector(bS,"[ws-on]",function(bV){bV.setAttribute("ws-on",bb.concat(" ",I.filter(function(bW){return bT.Contains(I.get(bb.SplitChars(bW,[":"],1),1));},bb.SplitChars(bV.getAttribute("ws-on"),[" "],1))));});G.IterSelector(bS,"[ws-attr-holes]",function(bV){var bW,bX,bY,bZ,b0;bW=bb.SplitChars(bV.getAttribute("ws-attr-holes"),[" "],1);for(bX=0,bY=bW.length-1;bX<=bY;bX++){bZ=I.get(bW,bX);bV.setAttribute(bZ,(b0=new a.RegExp(B.TextHoleRE(),"g"),bV.getAttribute(bZ).replace(b0,function(b1,b2){return bT.Contains(b2)?b1:"";})));}});};_6.fillInstanceAttrs=function(bS,bT){var bU,bV,bW,bX,bY;_6.convertAttrs(bT);bU=bT.nodeName.toLowerCase();bV=bS.querySelector("[ws-attr="+bU+"]");if(v.Equals(bV,null))bP.warn("Filling non-existent attr hole",bU);else{bV.removeAttribute("ws-attr");for(bW=0,bX=bT.attributes.length-1;bW<=bX;bW++){bY=bT.attributes.item(bW);bY.name==="class"&&bV.hasAttribute("class")?bV.setAttribute("class",bV.getAttribute("class")+" "+bY.nodeValue):bV.setAttribute(bY.name,bY.nodeValue);}}};_6.mapHoles=function(bS,bT){function bU(bV){G.IterSelector(bS,"["+bV+"]",function(bW){var bX,bY;bX=(bY=null,[bT.TryGetValue(bW.getAttribute(bV).toLowerCase(),{get:function(){return bY;},set:function(bZ){bY=bZ;}}),bY]);bX[0]?bW.setAttribute(bV,bX[1]):void 0;});}bU("ws-hole");bU("ws-replace");bU("ws-attr");bU("ws-onafterrender");bU("ws-var");G.IterSelector(bS,"[ws-on]",function(bV){bV.setAttribute("ws-on",bb.concat(" ",I.map(function(bW){var bX,bY,bZ;bX=bb.SplitChars(bW,[":"],1);bY=(bZ=null,[bT.TryGetValue(I.get(bX,1),{get:function(){return bZ;},set:function(b0){bZ=b0;}}),bZ]);return bY[0]?I.get(bX,0)+":"+bY[1]:bW;},bb.SplitChars(bV.getAttribute("ws-on"),[" "],1))));});G.IterSelector(bS,"[ws-attr-holes]",function(bV){var bW,bX,bY;bW=bb.SplitChars(bV.getAttribute("ws-attr-holes"),[" "],1);for(bX=0,bY=bW.length-1;bX<=bY;bX++)(function(){var bZ;function b0(b1,b2){var b3;b3=l.KeyValue(b2);return b1.replace(new a.RegExp("\\${"+b3[0]+"}","ig"),"${"+b3[1]+"}");}bZ=I.get(bW,bX);return bV.setAttribute(bZ,(((bN.Curried3(M.fold))(b0))(bV.getAttribute(bZ)))(bT));}());});};_6.fill=function(bS,bT,bU){while(true)if(bS.hasChildNodes())bU=bT.insertBefore(bS.lastChild,bU);else return null;};_6.convertAttrs=function(bS){var bU,bV,bW,bX,bY,bZ,b0,b1;function bT(b2){var b3;b3=bS.getAttribute(b2);b3===null?void 0:bS.setAttribute(b2,b3.toLowerCase());}bU=bS.attributes;bV=[];bW=[];bX=[];for(bY=0,bZ=bU.length-1;bY<=bZ;bY++){b0=bU.item(bY);bb.StartsWith(b0.nodeName,"ws-on")&&b0.nodeName!=="ws-onafterrender"&&b0.nodeName!=="ws-on"?(bV.push(b0.nodeName),bW.push(_7.string(b0.nodeName,{$:1,$0:"ws-on".length},null)+":"+b0.nodeValue.toLowerCase())):!bb.StartsWith(b0.nodeName,"ws-")&&(new a.RegExp(B.TextHoleRE())).test(b0.nodeValue)?(b0.nodeValue=(b1=new a.RegExp(B.TextHoleRE(),"g"),b0.nodeValue.replace(b1,function(b2,b3){return"${"+b3.toLowerCase()+"}";})),bX.push(b0.nodeName)):void 0;}!(bW.length==0)?bS.setAttribute("ws-on",bb.concat(" ",bW)):void 0;!(bX.length==0)?bS.setAttribute("ws-attr-holes",bb.concat(" ",bX)):void 0;bT("ws-hole");bT("ws-replace");bT("ws-attr");bT("ws-onafterrender");bT("ws-var");I.iter(function(b2){bS.removeAttribute(b2);},bV);};_7.string=function(bS,bT,bU){return bT==null?bU!=null&&bU.$==1?bS.slice(0,bU.$0+1):"":bU==null?bS.slice(bT.$0):bS.slice(bT.$0,bU.$0+1);};M.insufficient=function(){return l.FailWith("The input sequence has an insufficient number of elements.");};_8=K.KeyCollection=bN.Class({GetEnumerator$1:function(){return T.Get(M.map(function(bS){return bS.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},m,_8);_8.New=bN.Ctor(function(bS){m.New.call(this);this.d=bS;},_8);_9=n.ConcreteVar=bN.Class({Get:function(){return this.current;},Update:function(bS){this.Set(bS(this.Get()));},Set:function(bS){if(this.isConst)(function(bT){return bT("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(bT){bP.log(bT);}));else{Q.Obsolete(this.snap);this.current=bS;this.snap=Q.New({$:2,$0:bS,$1:[]});}},UpdateMaybe:function(bS){var bT;bT=bS(this.Get());bT!=null&&bT.$==1?this.Set(bT.$0):void 0;},get_View:function(){return this.view;},get_Id:function(){return"uinref"+a.String(this.id);}},X,_9);_9.New=bN.Ctor(function(bS,bT,bU){var bV;bV=this;X.New.call(this);this.isConst=bS;this.current=bU;this.snap=bT;this.view=function(){return bV.snap;};this.id=bg.Int();},_9);_.StopCurrent=function(){var bS;bS=_.currentPlaying();bS==null?void 0:bS.$0.stop();};_.currentPlaying=function(){bq.$cctor();return bq.currentPlaying;};_.SetCurrent=function(bS){_.set_currentPlaying({$:1,$0:bS});};_.set_currentPlaying=function(bS){bq.$cctor();bq.currentPlaying=bS;};$.CreateElemNode=function(bS,bT,bU){var bV;$.LinkElement(bS,bU);bV=F.Insert(bS,bT);return R.New(bV,bU,null,bS,bg.Int(),bN.GetOptional(bV.OnAfterRender));};$.LinkPrevElement=function(bS,bT){$.InsertDoc(bS.parentNode,bT,bS);};$.CreateDelimitedRunState=function(bS,bT,bU){return bm.New(bn.get_Empty(),$.CreateDelimitedElemNode(bS,bT,F.EmptyAttr(),bU));};$.PerformAnimatedUpdate=function(bS,bT,bU){var bV;return bc.get_UseAnimations()?(bV=null,bu.Delay(function(){var bW,bX,bY;bW=bn.FindAll(bU);bX=$.ComputeChangeAnim(bT,bW);bY=$.ComputeEnterAnim(bT,bW);return bu.Bind(bc.Play(bc.Append(bX,$.ComputeExitAnim(bT,bW))),function(){return bu.Bind($.SyncElemNodesNextFrame(bS,bT),function(){return bu.Bind(bc.Play(bY),function(){bT.PreviousNodes=bW;return bu.Return(null);});});});})):$.SyncElemNodesNextFrame(bS,bT);};$.PerformSyncUpdate=function(bS,bT,bU){var bV;bV=bn.FindAll(bU);$.SyncElemNode(bS,bT.Top);bT.PreviousNodes=bV;};$.LinkElement=function(bS,bT){$.InsertDoc(bS,bT,null);};$.InsertDoc=function(bS,bT,bU){var bV;return bT!=null&&bT.$==1?$.InsertNode(bS,bT.$0.El,bU):bT!=null&&bT.$==2?(bV=bT.$0,(bV.Dirty=false,$.InsertDoc(bS,bV.Current,bU))):bT==null?bU:bT!=null&&bT.$==4?$.InsertNode(bS,bT.$0.Text,bU):bT!=null&&bT.$==5?$.InsertNode(bS,bT.$0,bU):bT!=null&&bT.$==6?I.foldBack(function(bW,bX){return bW==null||bW.constructor===J?$.InsertDoc(bS,bW,bX):$.InsertNode(bS,bW,bX);},bT.$0.Els,bU):$.InsertDoc(bS,bT.$0,$.InsertDoc(bS,bT.$1,bU));};$.CreateDelimitedElemNode=function(bS,bT,bU,bV){var bW,bX;bW=bS.parentNode;$.LinkPrevElement(bT,bV);bX=F.Insert(bW,bU);return R.New(bX,bV,{$:1,$0:[bS,bT]},bW,bg.Int(),bN.GetOptional(bX.OnAfterRender));};$.SyncElemNodesNextFrame=function(bS,bT){function bU(bV){a.requestAnimationFrame(function(){$.SyncElemNode(bS,bT.Top);bV();});}return bd.BatchUpdatesEnabled()?bu.FromContinuations(function(bV,bW,bX){return bU.apply(null,[bV,bW,bX]);}):($.SyncElemNode(bS,bT.Top),bu.Return(null));};$.ComputeExitAnim=function(bS,bT){return bc.Concat(I.map(function(bU){return F.GetExitAnim(bU.Attr);},bn.ToArray(bn.Except(bT,bn.Filter(function(bU){return F.HasExitAnim(bU.Attr);},bS.PreviousNodes)))));};$.ComputeEnterAnim=function(bS,bT){return bc.Concat(I.map(function(bU){return F.GetEnterAnim(bU.Attr);},bn.ToArray(bn.Except(bS.PreviousNodes,bn.Filter(function(bU){return F.HasEnterAnim(bU.Attr);},bT)))));};$.ComputeChangeAnim=function(bS,bT){var bU;function bV(bW){return F.HasChangeAnim(bW.Attr);}bU=function(bW){return bn.Filter(bV,bW);};return bc.Concat(I.map(function(bW){return F.GetChangeAnim(bW.Attr);},bn.ToArray(bn.Intersect(bU(bS.PreviousNodes),bU(bT)))));};$.SyncElemNode=function(bS,bT){!bS?$.SyncElement(bT):void 0;$.Sync(bT.Children);$.AfterRender(bT);};$.InsertNode=function(bS,bT,bU){G.InsertAt(bS,bU,bT);return bT;};$.SyncElement=function(bS){function bT(bU){function bV(bW){var bX,bY;return bW!=null&&bW.$==0?bV(bW.$0)||bV(bW.$1):bW!=null&&bW.$==2?(bX=bW.$0,bX.Dirty||bV(bX.Current)):bW!=null&&bW.$==6&&(bY=bW.$0,bY.Dirty||I.exists(bT,bY.Holes));}return bV(bU.Children);}F.Sync(bS.El,bS.Attr);bT(bS)?$.DoSyncElement(bS):void 0;};$.Sync=function(bS){var bT,bU;if(bS!=null&&bS.$==1)$.SyncElemNode(false,bS.$0);else if(bS!=null&&bS.$==2)$.Sync(bS.$0.Current);else if(bS==null);else if(bS!=null&&bS.$==5);else if(bS!=null&&bS.$==4){bT=bS.$0;bT.Dirty?(bT.Text.nodeValue=bT.Value,bT.Dirty=false):void 0;}else if(bS!=null&&bS.$==6){bU=bS.$0;I.iter(function(bV){$.SyncElemNode(false,bV);},bU.Holes);I.iter(function(bV){F.Sync(bV[0],bV[1]);},bU.Attrs);$.AfterRender(bU);}else{$.Sync(bS.$0);$.Sync(bS.$1);}};$.AfterRender=function(bS){var bT;bT=bN.GetOptional(bS.Render);bT!=null&&bT.$==1?(bT.$0(bS.El),bN.SetOptional(bS,"Render",null)):void 0;};$.CreateRunState=function(bS,bT){return bm.New(bn.get_Empty(),$.CreateElemNode(bS,F.EmptyAttr(),bT));};$.DoSyncElement=function(bS){var bT,bU,bV;function bW(bX,bY){var bZ,b0;return bX!=null&&bX.$==1?bX.$0.El:bX!=null&&bX.$==2?(bZ=bX.$0,bZ.Dirty?(bZ.Dirty=false,$.InsertDoc(bT,bZ.Current,bY)):bW(bZ.Current,bY)):bX==null?bY:bX!=null&&bX.$==4?bX.$0.Text:bX!=null&&bX.$==5?bX.$0:bX!=null&&bX.$==6?(b0=bX.$0,(b0.Dirty?b0.Dirty=false:void 0,I.foldBack(function(b1,b2){return b1==null||b1.constructor===J?bW(b1,b2):b1;},b0.Els,bY))):bW(bX.$0,bW(bX.$1,bY));}bT=bS.El;bF.Iter((bU=bS.El,function(bX){G.RemoveNode(bU,bX);}),bF.Except(bF.DocChildren(bS),bF.Children(bS.El,bN.GetOptional(bS.Delimiters))));bW(bS.Children,(bV=bN.GetOptional(bS.Delimiters),bV!=null&&bV.$==1?bV.$0[1]:null));};ba=n.Updates=bN.Class({},null,ba);ba.Create=function(bS){var bT;bT=null;bT=ba.New(bS,null,function(){var bU;bU=bT.s;return bU===null?(bU=Q.Copy(bT.c()),bT.s=bU,Q.WhenObsoleteRun(bU,function(){bT.s=null;}),bU):bU;});return bT;};ba.New=function(bS,bT,bU){return new ba({c:bS,s:bT,v:bU});};bb.concat=function(bS,bT){return I.ofSeq(bT).join(bS);};bb.SplitChars=function(bS,bT,bU){return bb.Split(bS,new a.RegExp("["+bb.RegexEscape(bT.join(""))+"]"),bU);};bb.StartsWith=function(bS,bT){return bS.substring(0,bT.length)==bT;};bb.Split=function(bS,bT,bU){return bU===1?I.filter(function(bV){return bV!=="";},bb.SplitWith(bS,bT)):bb.SplitWith(bS,bT);};bb.RegexEscape=function(bS){return bS.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};bb.SplitWith=function(bS,bT){return bS.split(bT);};bc.get_UseAnimations=function(){return bo.UseAnimations();};bc.Play=function(bS){var bT;bT=null;return bu.Delay(function(){return bu.Bind(bc.Run(a.ignore,bo.Actions(bS)),function(){bo.Finalize(bS);return bu.Return(null);});});};bc.Append=function(bS,bT){return{$:0,$0:bv.Append(bS.$0,bT.$0)};};bc.Run=function(bS,bT){var bU;function bV(bW){function bX(bY,bZ){var b0;b0=bZ-bY;bT.Compute(b0);bS();return b0<=bU?void a.requestAnimationFrame(function(b1){bX(bY,b1);}):bW();}a.requestAnimationFrame(function(bY){bX(bY,bY);});}bU=bT.Duration;return bU===0?bu.Zero():bu.FromContinuations(function(bW,bX,bY){return bV.apply(null,[bW,bX,bY]);});};bc.Concat=function(bS){return{$:0,$0:bv.Concat(M.map(bo.List,bS))};};bc.get_Empty=function(){return{$:0,$0:bv.Empty()};};bd.BatchUpdatesEnabled=function(){bp.$cctor();return bp.BatchUpdatesEnabled;};bf.StartProcessor=function(bS){var bT;function bU(){var bV;bV=null;return bu.Delay(function(){return bu.Bind(bS,function(){var bW;bW=bT[0];return bW===1?(bT[0]=0,bu.Zero()):bW===2?(bT[0]=1,bU()):bu.Zero();});});}bT=[0];return function(){var bV;bV=bT[0];bV===0?(bT[0]=1,bu.Start(bU(),null)):bV===1?bT[0]=2:void 0;};};bg.Id=function(){bg.set_counter(bg.counter()+1);return"uid"+a.String(bg.counter());};bg.Int=function(){bg.set_counter(bg.counter()+1);return bg.counter();};bg.set_counter=function(bS){bw.$cctor();bw.counter=bS;};bg.counter=function(){bw.$cctor();return bw.counter;};bk.$cctor=function(){bk.$cctor=a.ignore;bk.EmptyAttr=null;};bm.New=function(bS,bT){return{PreviousNodes:bS,Top:bT};};bn.get_Empty=function(){return{$:0,$0:new V.New$3()};};bn.FindAll=function(bS){var bT;function bU(bW){if(bW!=null&&bW.$==0){bU(bW.$0);bU(bW.$1);}else if(bW!=null&&bW.$==1)bV(bW.$0);else if(bW!=null&&bW.$==2)bU(bW.$0.Current);else if(bW!=null&&bW.$==6)I.iter(bV,bW.$0.Holes);}function bV(bW){bT.push(bW);bU(bW.Children);}bT=[];bU(bS);return{$:0,$0:new V.New$2(bT)};};bn.Filter=function(bS,bT){return{$:0,$0:bB.Filter(bS,bT.$0)};};bn.Except=function(bS,bT){return{$:0,$0:bB.Except(bS.$0,bT.$0)};};bn.ToArray=function(bS){return bB.ToArray(bS.$0);};bn.Intersect=function(bS,bT){return{$:0,$0:bB.Intersect(bS.$0,bT.$0)};};bo.UseAnimations=function(){bt.$cctor();return bt.UseAnimations;};bo.Actions=function(bS){return bo.ConcatActions(I.choose(function(bT){return bT.$==1?{$:1,$0:bT.$0}:null;},bv.ToArray(bS.$0)));};bo.Finalize=function(bS){I.iter(function(bT){if(bT.$==0)bT.$0();},bv.ToArray(bS.$0));};bo.ConcatActions=function(bS){var bT,bU,bV,bW;bT=z.ofSeqNonCopying(bS);bU=I.length(bT);return bU===0?bo.Const():bU===1?I.get(bT,0):(bV=M.max(M.map(function(bX){return bX.Duration;},bT)),(bW=I.map(function(bX){return bo.Prolong(bV,bX);},bT),bo.Def(bV,function(bX){I.iter(function(bY){bY.Compute(bX);},bW);})));};bo.List=function(bS){return bS.$0;};bo.Const=function(bS){return bo.Def(0,function(){return bS;});};bo.Def=function(bS,bT){return{Compute:bT,Duration:bS};};bo.Prolong=function(bS,bT){var bU,bV,bW;bU=bT.Compute;bV=bT.Duration;bW=bI.Create(function(){return bT.Compute(bT.Duration);});return{Compute:function(bX){return bX>=bV?bW.f():bU(bX);},Duration:bS};};bp.$cctor=function(){bp.$cctor=a.ignore;bp.BatchUpdatesEnabled=true;};bq.$cctor=function(){bq.$cctor=a.ignore;bq.currentPlaying=null;};br.concat=function(bS){var bT,bU;bT=[];for(var bV in bS)bT.push.apply(bT,bS[bV]);return bT;};bs.Clear=function(bS){bS.splice(0,I.length(bS));};bt.$cctor=function(){bt.$cctor=a.ignore;bt.CubicInOut=bx.Custom(function(bS){var bT;bT=bS*bS;return 3*bT-2*(bT*bS);});bt.UseAnimations=true;};bu.Delay=function(bS){return function(bT){try{(bS(null))(bT);}catch(bU){bT.k({$:1,$0:bU});}};};bu.Bind=function(bS,bT){return bu.checkCancel(function(bU){bS(by.New(function(bV){var bW;if(bV.$==0){bW=bV.$0;bu.scheduler().Fork(function(){try{(bT(bW))(bU);}catch(bX){bU.k({$:1,$0:bX});}});}else bu.scheduler().Fork(function(){bU.k(bV);});},bU.ct));});};bu.Zero=function(){bz.$cctor();return bz.Zero;};bu.Start=function(bS,bT){var bU,bV;bU=(bV=(bu.defCTS())[0],bT==null?bV:bT.$0);bu.scheduler().Fork(function(){if(!bU.c)bS(by.New(function(bW){if(bW.$==1)bu.UncaughtAsyncError(bW.$0);},bU));});};bu.Return=function(bS){return function(bT){bT.k({$:0,$0:bS});};};bu.checkCancel=function(bS){return function(bT){if(bT.ct.c)bu.cancel(bT);else bS(bT);};};bu.defCTS=function(){bz.$cctor();return bz.defCTS;};bu.UncaughtAsyncError=function(bS){bP.log("WebSharper: Uncaught asynchronous exception",bS);};bu.FromContinuations=function(bS){return function(bT){var bU;function bV(bW){if(bU[0])l.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bU[0]=true;bu.scheduler().Fork(bW);}}bU=[false];bS(function(bW){bV(function(){bT.k({$:0,$0:bW});});},function(bW){bV(function(){bT.k({$:1,$0:bW});});},function(bW){bV(function(){bT.k({$:2,$0:bW});});});};};bu.cancel=function(bS){bS.k({$:2,$0:new bH.New(bS.ct)});};bu.scheduler=function(){bz.$cctor();return bz.scheduler;};bv.Append=function(bS,bT){return bS.$==0?bT:bT.$==0?bS:{$:2,$0:bS,$1:bT};};bv.ToArray=function(bS){var bT;function bU(bV){if(bV.$==1)bT.push(bV.$0);else if(bV.$==2){bU(bV.$0);bU(bV.$1);}else if(bV.$==3)I.iter(function(bW){bT.push(bW);},bV.$0);}bT=[];bU(bS);return bT.slice(0);};bv.Concat=function(bS){var bT;bT=z.ofSeqNonCopying(bS);return z.TreeReduce(bv.Empty(),bv.Append,bT);};bv.Empty=function(){bJ.$cctor();return bJ.Empty;};bw.$cctor=function(){bw.$cctor=a.ignore;bw.counter=0;};bx=n.Easing=bN.Class({},m,bx);bx.Custom=function(bS){return new bx.New(bS);};bx.New=bN.Ctor(function(bS){m.New.call(this);this.transformTime=bS;},bx);by.New=function(bS,bT){return{k:bS,ct:bT};};bz.$cctor=function(){bz.$cctor=a.ignore;bz.noneCT=bA.New(false,[]);bz.scheduler=new bD.New();bz.defCTS=[new bE.New()];bz.Zero=bu.Return();bz.GetCT=function(bS){bS.k({$:0,$0:bS.ct});};};bA.New=function(bS,bT){return{c:bS,r:bT};};bB.Filter=function(bS,bT){return new V.New$2(I.filter(bS,bB.ToArray(bT)));};bB.Except=function(bS,bT){var bU;bU=new V.New$2(bB.ToArray(bT));bU.ExceptWith(bB.ToArray(bS));return bU;};bB.ToArray=function(bS){var bT;bT=I.create(bS.get_Count(),void 0);bS.CopyTo(bT);return bT;};bB.Intersect=function(bS,bT){var bU;bU=new V.New$2(bB.ToArray(bS));bU.IntersectWith(bB.ToArray(bT));return bU;};bC=n.DynamicAttrNode=bN.Class({NChanged:function(){return this.updates;},NGetExitAnim:function(bS){return bc.get_Empty();},NGetEnterAnim:function(bS){return bc.get_Empty();},NGetChangeAnim:function(bS){return bc.get_Empty();},NSync:function(bS){if(this.dirty){(this.push(bS))(this.value);this.dirty=false;}}},m,bC);bC.New=bN.Ctor(function(bS,bT){var bU;bU=this;m.New.call(this);this.push=bT;this.value=void 0;this.dirty=false;this.updates=H.Map(function(bV){bU.value=bV;bU.dirty=true;},bS);},bC);bD=bu.Scheduler=bN.Class({Fork:function(bS){var bT;bT=this;this.robin.push(bS);this.idle?(this.idle=false,a.setTimeout(function(){bT.tick();},0)):void 0;},tick:function(){var bS,bT,bU;bT=this;bU=bR.now();bS=true;while(bS)if(this.robin.length===0){this.idle=true;bS=false;}else{(this.robin.shift())();bR.now()-bU>40?(a.setTimeout(function(){bT.tick();},0),bS=false):void 0;}}},m,bD);bD.New=bN.Ctor(function(){m.New.call(this);this.idle=true;this.robin=[];},bD);bE=h.CancellationTokenSource=bN.Class({},m,bE);bE.New=bN.Ctor(function(){m.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},bE);bF.Children=function(bS,bT){var bU,bV,bW;if(bT!=null&&bT.$==1){bW=[];bU=bT.$0[0].nextSibling;while(bU!==bT.$0[1]){bW.push(bU);bU=bU.nextSibling;}return{$:0,$0:bW};}else return{$:0,$0:I.init(bS.childNodes.length,(bV=bS.childNodes,function(bX){return bV[bX];}))};};bF.Except=function(bS,bT){var bU;bU=bS.$0;return{$:0,$0:I.filter(function(bV){return I.forall(function(bW){return!(bV===bW);},bU);},bT.$0)};};bF.Iter=function(bS,bT){I.iter(bS,bT.$0);};bF.DocChildren=function(bS){var bT;function bU(bV){if(bV!=null&&bV.$==2)bU(bV.$0.Current);else if(bV!=null&&bV.$==1)bT.push(bV.$0.El);else if(bV==null);else if(bV!=null&&bV.$==5)bT.push(bV.$0);else if(bV!=null&&bV.$==4)bT.push(bV.$0.Text);else if(bV!=null&&bV.$==6)I.iter(function(bW){if(bW==null||bW.constructor===J)bU(bW);else bT.push(bW);},bV.$0.Els);else{bU(bV.$0);bU(bV.$1);}}bT=[];bU(bS.Children);return{$:0,$0:z.ofSeqNonCopying(bT)};};bH=h.OperationCanceledException=bN.Class({},bG,bH);bH.New=bN.Ctor(function(bS){bH.New$1.call(this,"The operation was canceled.",null,bS);},bH);bH.New$1=bN.Ctor(function(bS,bT,bU){this.message=bS;this.inner=bT;J.setPrototypeOf(this,bH.prototype);this.ct=bU;},bH);bI.Create=function(bS){return bL.New(false,bS,bI.forceLazy);};bI.forceLazy=function(){var bS;bS=this.v();this.c=true;this.v=bS;this.f=bI.cachedLazy;return bS;};bI.cachedLazy=function(){return this.v;};bJ.$cctor=function(){bJ.$cctor=a.ignore;bJ.Empty={$:0};};bL.New=function(bS,bT,bU){return{c:bS,v:bT,f:bU};};bN.OnLoad(function(){c.Main();});}());


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '/Content/';
  IntelliFactory.Runtime.Start();
}
